#
# Makefile to build the AVR IOS and CP/M BIOS for Z80-MBC2-NG
#

AVR_IOS = IOS-Z80-MBC2-NG
CPM_BIOS = bios_devel.linux


.PHONY: all
all:	BIOS IOS32 IOS1284P


.PHONY: BIOS
BIOS:
	$(MAKE) -C $(CPM_BIOS)


.PHONY: IOS32
IOS32:	IOS32_16 IOS32_20 IOS32_24

.PHONY: IOS32_16
IOS32_16:
	ATMEGA=32 CLK=16 $(MAKE) -C $(AVR_IOS)

.PHONY: IOS32_20
IOS32_20:
	ATMEGA=32 CLK=20 $(MAKE) -C $(AVR_IOS)

.PHONY: IOS32_24
IOS32_24:
	ATMEGA=32 CLK=24 $(MAKE) -C $(AVR_IOS)


.PHONY: IOS1284P
IOS1284P: IOS1284P_16 IOS1284P_20 IOS1284P_24

.PHONY: IOS1284P_16
IOS1284P_16:
	ATMEGA=1284p CLK=16 $(MAKE) -C $(AVR_IOS)

.PHONY: IOS1284P_20
IOS1284P_20:
	ATMEGA=1284p CLK=20 $(MAKE) -C $(AVR_IOS)

.PHONY: IOS1284P_24
IOS1284P_24:
	ATMEGA=1284p CLK=24 $(MAKE) -C $(AVR_IOS)

.PHONY: clean
clean:
	$(MAKE) -C $(AVR_IOS) clean
	$(MAKE) -C $(CPM_BIOS) clean

.PHONY: distclean
distclean:
	$(MAKE) -C $(AVR_IOS) distclean
	$(MAKE) -C $(CPM_BIOS) distclean

.PHONY: update
update:
	$(MAKE) -C $(AVR_IOS) update
