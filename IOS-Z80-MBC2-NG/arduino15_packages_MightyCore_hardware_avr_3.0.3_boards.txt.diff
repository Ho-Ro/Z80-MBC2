--- boards.txt.orig	2024-11-20 22:50:45.000000000 +0100
+++ boards.txt	2026-01-08 17:18:54.187176580 +0100
@@ -16,6 +16,7 @@
 menu.pinout=Pinout
 menu.bootloader=Bootloader
 menu.baudrate=Baud rate
+menu.SerialBuf=Serial Port Buffers (RX/TX)
 
 ######################
 #### ATmega1284/P ####
@@ -97,6 +98,28 @@
 1284.menu.baudrate.4800=4800
 1284.menu.baudrate.4800.upload.speed=4800
 
+1284.menu.SerialBuf.disabled=Default
+1284.menu.SerialBuf.disabled.compilerSB.c.extra_flags=
+1284.menu.SerialBuf.disabled.compilerSB.cpp.extra_flags=
+1284.menu.SerialBuf.SB64_64=64/64
+1284.menu.SerialBuf.SB64_64.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=64 -DSERIAL_TX_BUFFER_SIZE=64
+1284.menu.SerialBuf.SB64_64.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=64 -DSERIAL_TX_BUFFER_SIZE=64
+1284.menu.SerialBuf.SB128_64=128/64
+1284.menu.SerialBuf.SB128_64.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=64
+1284.menu.SerialBuf.SB128_64.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=64
+1284.menu.SerialBuf.SB128_128=128/128
+1284.menu.SerialBuf.SB128_128.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=128
+1284.menu.SerialBuf.SB128_128.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=128
+1284.menu.SerialBuf.SB256_64=256/64
+1284.menu.SerialBuf.SB256_64.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=64
+1284.menu.SerialBuf.SB256_64.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=64
+1284.menu.SerialBuf.SB256_128=256/128
+1284.menu.SerialBuf.SB256_128.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=128
+1284.menu.SerialBuf.SB256_128.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=128
+1284.menu.SerialBuf.SB256_256=256/256
+1284.menu.SerialBuf.SB256_256.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=256
+1284.menu.SerialBuf.SB256_256.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=256
+
 # Variants
 1284.menu.variant.modelP=1284P
 1284.menu.variant.modelP.build.mcu=atmega1284p
@@ -115,15 +138,15 @@
 
 # Compiler link time optimization
 1284.menu.LTO.Os_flto=LTO enabled
-1284.menu.LTO.Os_flto.compiler.c.extra_flags=-Wextra -flto -g
+1284.menu.LTO.Os_flto.compiler.c.extra_flags={compilerSB.c.extra_flags} -Wextra -flto -g
 1284.menu.LTO.Os_flto.compiler.c.elf.extra_flags=-w -flto -g
-1284.menu.LTO.Os_flto.compiler.cpp.extra_flags=-Wextra -flto -g
+1284.menu.LTO.Os_flto.compiler.cpp.extra_flags={compilerSB.c.extra_flags} -Wextra -flto -g
 1284.menu.LTO.Os_flto.ltoarcmd=avr-gcc-ar
 
 1284.menu.LTO.Os=LTO disabled
-1284.menu.LTO.Os.compiler.c.extra_flags=
+1284.menu.LTO.Os.compiler.c.extra_flags={compilerSB.c.extra_flags}
 1284.menu.LTO.Os.compiler.c.elf.extra_flags=
-1284.menu.LTO.Os.compiler.cpp.extra_flags=
+1284.menu.LTO.Os.compiler.cpp.extra_flags={compilerSB.c.extra_flags}
 1284.menu.LTO.Os.ltoarcmd=avr-ar
 
 # Clock frequencies
@@ -139,6 +162,13 @@
 1284.menu.clock.20MHz_external.build.clkpr=
 1284.menu.clock.20MHz_external.build.f_cpu=20000000L
 
+# Overclocking option 24 MHz
+1284.menu.clock.24MHz_external=External 24 MHz
+1284.menu.clock.24MHz_external.upload.default_speed=115200
+1284.menu.clock.24MHz_external.bootloader.low_fuses=0xf7
+1284.menu.clock.24MHz_external.build.clkpr=
+1284.menu.clock.24MHz_external.build.f_cpu=24000000L
+
 1284.menu.clock.18_432MHz_external=External 18.4320 MHz
 1284.menu.clock.18_432MHz_external.upload.default_speed=115200
 1284.menu.clock.18_432MHz_external.bootloader.low_fuses=0xf7
@@ -1004,6 +1034,28 @@
 32.menu.baudrate.4800=4800
 32.menu.baudrate.4800.upload.speed=4800
 
+32.menu.SerialBuf.disabled=Default
+32.menu.SerialBuf.disabled.compilerSB.c.extra_flags=
+32.menu.SerialBuf.disabled.compilerSB.cpp.extra_flags=
+32.menu.SerialBuf.SB64_64=64/64
+32.menu.SerialBuf.SB64_64.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=64 -DSERIAL_TX_BUFFER_SIZE=64
+32.menu.SerialBuf.SB64_64.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=64 -DSERIAL_TX_BUFFER_SIZE=64
+32.menu.SerialBuf.SB128_64=128/64
+32.menu.SerialBuf.SB128_64.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=64
+32.menu.SerialBuf.SB128_64.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=64
+32.menu.SerialBuf.SB128_128=128/128
+32.menu.SerialBuf.SB128_128.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=128
+32.menu.SerialBuf.SB128_128.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=128 -DSERIAL_TX_BUFFER_SIZE=128
+32.menu.SerialBuf.SB256_64=256/64
+32.menu.SerialBuf.SB256_64.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=64
+32.menu.SerialBuf.SB256_64.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=64
+32.menu.SerialBuf.SB256_128=256/128
+32.menu.SerialBuf.SB256_128.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=128
+32.menu.SerialBuf.SB256_128.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=128
+32.menu.SerialBuf.SB256_256=256/256
+32.menu.SerialBuf.SB256_256.compilerSB.c.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=256
+32.menu.SerialBuf.SB256_256.compilerSB.cpp.extra_flags=-DSERIAL_RX_BUFFER_SIZE=256 -DSERIAL_TX_BUFFER_SIZE=256
+
 # Pinouts
 32.menu.pinout.standard=Standard pinout
 32.menu.pinout.standard.build.variant=standard
@@ -1025,15 +1077,15 @@
 
 # Compiler link time optimization
 32.menu.LTO.Os_flto=LTO enabled
-32.menu.LTO.Os_flto.compiler.c.extra_flags=-Wextra -flto -g
+32.menu.LTO.Os_flto.compiler.c.extra_flags={compilerSB.c.extra_flags} -Wextra -flto -g
 32.menu.LTO.Os_flto.compiler.c.elf.extra_flags=-w -flto -g
-32.menu.LTO.Os_flto.compiler.cpp.extra_flags=-Wextra -flto -g
+32.menu.LTO.Os_flto.compiler.cpp.extra_flags={compilerSB.c.extra_flags} -Wextra -flto -g
 32.menu.LTO.Os_flto.ltoarcmd=avr-gcc-ar
 
 32.menu.LTO.Os=LTO disabled
-32.menu.LTO.Os.compiler.c.extra_flags=
+32.menu.LTO.Os.compiler.c.extra_flags={compilerSB.c.extra_flags}
 32.menu.LTO.Os.compiler.c.elf.extra_flags=
-32.menu.LTO.Os.compiler.cpp.extra_flags=
+32.menu.LTO.Os.compiler.cpp.extra_flags={compilerSB.c.extra_flags}
 32.menu.LTO.Os.ltoarcmd=avr-ar
 
 # Clock frequencies - This is the second part of the low fuse bit concatenation
@@ -1049,6 +1101,23 @@
 32.menu.clock.20MHz_external.bootloader.ckopt_bit=0
 32.menu.clock.20MHz_external.build.f_cpu=20000000L
 
+###
+#
+# Overclocking options 22 and 24 MHz
+32.menu.clock.22MHz_external=External 22 MHz
+32.menu.clock.22MHz_external.upload.default_speed=115200
+32.menu.clock.22MHz_external.bootloader.sut_cksel_bits=111111
+32.menu.clock.22MHz_external.bootloader.ckopt_bit=0
+32.menu.clock.22MHz_external.build.f_cpu=22000000L
+
+32.menu.clock.24MHz_external=External 24 MHz
+32.menu.clock.24MHz_external.upload.default_speed=115200
+32.menu.clock.24MHz_external.bootloader.sut_cksel_bits=111111
+32.menu.clock.24MHz_external.bootloader.ckopt_bit=0
+32.menu.clock.24MHz_external.build.f_cpu=24000000L
+#
+###
+
 32.menu.clock.18_432MHz_external=External 18.4320 MHz
 32.menu.clock.18_432MHz_external.upload.default_speed=115200
 32.menu.clock.18_432MHz_external.bootloader.sut_cksel_bits=111111
